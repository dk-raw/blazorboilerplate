@using Microsoft.AspNetCore.Components
@inject NavigationManager navigationManager
@inject AuthenticationStateProvider authStateProvider
@inject AppState appState
@inject IStringLocalizer<Global> L

<AuthorizeView Context="AuthorizeContext">
    <Authorized>
        <MudTooltip Text="@L["Logout"]">
            <MudIconButton  Icon="@Icons.Filled.ExitToApp" OnClick="LogoutClick"></MudIconButton>
        </MudTooltip>
    </Authorized>
    <NotAuthorized>
        <MudTooltip Text="@L["Login"]">
            <MudIconButton  Icon="@Icons.Filled.AccountBox" Link="@BlazorBoilerplate.Constants.Settings.LoginPath"></MudIconButton>
        </MudTooltip>
    </NotAuthorized>
</AuthorizeView>

@code {
    async Task LogoutClick()
    {
        appState.ClearUserProfile();
        await ((IdentityAuthenticationStateProvider)authStateProvider).Logout();
    }
}
